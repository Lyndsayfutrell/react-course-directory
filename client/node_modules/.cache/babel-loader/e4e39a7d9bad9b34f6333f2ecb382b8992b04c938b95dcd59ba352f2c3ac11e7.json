{"ast":null,"code":"import _defineProperty from\"/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Redirect,withRouter}from'react-router-dom';import Form from'./Form';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateCourse=/*#__PURE__*/function(_Component){_inherits(CreateCourse,_Component);var _super=_createSuper(CreateCourse);function CreateCourse(){var _this;_classCallCheck(this,CreateCourse);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:'',description:'',estimatedTime:'',materialsNeeded:'',authorId:'',didMount:'',authUserId:'',errors:[]};_this.change=function(event){var name=event.target.name;var value=event.target.value;_this.setState(function(){return _defineProperty({},name,value);});};_this.submit=function(){var id=_this.props.match.params.id;var context=_this.props.context;var password=context.password;var userId=context.authenticatedUser[\"User ID\"];var username=context.authenticatedUser.Username;var _this$state=_this.state,title=_this$state.title,description=_this$state.description,estimatedTime=_this$state.estimatedTime,materialsNeeded=_this$state.materialsNeeded;var body={\"title\":title,\"description\":description,\"estimatedTime\":estimatedTime,\"materialsNeeded\":materialsNeeded,\"userId\":userId};context.data.updateCourse(username,password,body,id).then(function(errors){if(errors.length){_this.setState({errors:errors});}else{_this.props.history.push(\"/courses/\".concat(id));}}).catch(function(err){console.log(err);_this.props.history.push('/error');});};_this.cancel=function(){var id=_this.props.match.params.id;_this.props.history.push(\"/courses/\".concat(id));};return _this;}_createClass(CreateCourse,[{key:\"componentDidMount\",value://run api and set state\nfunction componentDidMount(){var _this2=this;var id=this.props.match.params.id;this.props.context.data.getCourseById(id).then(function(data){_this2.setState({title:data.title});_this2.setState({description:data.description});_this2.setState({estimatedTime:data.estimatedTime});_this2.setState({materialsNeeded:data.materialsNeeded});_this2.setState({authorId:data.userId});_this2.setState({authUserId:_this2.props.context.authenticatedUser[\"User ID\"]});_this2.setState({didMount:true});}).catch(function(err){_this2.setState({didMount:true});console.log(err);});}},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,title=_this$state2.title,description=_this$state2.description,estimatedTime=_this$state2.estimatedTime,materialsNeeded=_this$state2.materialsNeeded,authorId=_this$state2.authorId,authUserId=_this$state2.authUserId,didMount=_this$state2.didMount,errors=_this$state2.errors;console.log(authUserId);// if mount function is complete either failed or success, page will return            \nif(didMount===true){return/*#__PURE__*/_jsx(\"main\",{children://checks if author is logged in user, if not reroutes to forbidden\nauthUserId!==authorId?/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/forbidden'}}):/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update\"}),/*#__PURE__*/_jsx(Form,{cancel:this.cancel,errors:errors,submit:this.submit,submitButtonText:\"Update Course\",elements:function elements(){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main--flex\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Course Title\"}),/*#__PURE__*/_jsx(\"input\",{id:\"title\",name:\"title\",type:\"text\",value:title,onChange:_this3.change,placeholder:\"Course Title\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"By \",_this3.props.context.authenticatedUser.Name]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Course Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",type:\"textarea\",value:description,onChange:_this3.change,placeholder:\"Enter Course Description\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"estimatedTime\",children:\"Estimated Time\"}),/*#__PURE__*/_jsx(\"input\",{id:\"estimatedTime\",name:\"tiestimatedTimetle\",type:\"text\",value:estimatedTime,onChange:_this3.change,placeholder:\"Estimated Time\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"materialsNeeded\",children:\"Materials Needed\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"materialsNeeded\",name:\"materialsNeeded\",type:\"textarea\",value:materialsNeeded,onChange:_this3.change,placeholder:\"Enter Materials Needed\"})]})]})});}})]})});}}//updates values on change\n}]);return CreateCourse;}(Component);export default withRouter(CreateCourse);","map":{"version":3,"names":["React","Component","Redirect","withRouter","Form","CreateCourse","state","title","description","estimatedTime","materialsNeeded","authorId","didMount","authUserId","errors","change","event","name","target","value","setState","submit","id","props","match","params","context","password","userId","authenticatedUser","username","Username","body","data","updateCourse","then","length","history","push","catch","err","console","log","cancel","getCourseById","pathname","Name"],"sources":["/Users/lyndsayfutrell/Desktop/FullStack/ProjectTen/client/src/components/UpdateCourse.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom'\nimport Form from './Form';\n\nclass CreateCourse extends Component {\n    state = {\n        title: '',\n        description: '',\n        estimatedTime: '',\n        materialsNeeded: '',\n        authorId: '',\n        didMount: '',\n        authUserId: '',\n        errors: [],\n      }\n\n      //run api and set state\n      componentDidMount() {\n        const id = this.props.match.params.id;\n        this.props.context.data.getCourseById(id)\n        .then((data) => {\n            this.setState({ title: data.title })\n            this.setState({ description: data.description })\n            this.setState({ estimatedTime: data.estimatedTime })\n            this.setState({ materialsNeeded: data.materialsNeeded })\n            this.setState({ authorId: data.userId })\n            this.setState({ authUserId: this.props.context.authenticatedUser[ \"User ID\" ] })\n            this.setState({ didMount: true })\n        })\n        .catch((err) => {\n          this.setState({ didMount: true })\n            console.log(err);\n        });\n    }\n    \n      render() {\n        const {\n          title,\n          description,\n          estimatedTime,\n          materialsNeeded,\n          authorId,\n          authUserId,\n          didMount,\n          errors,\n        } = this.state;\n\nconsole.log(authUserId);\n\n\n// if mount function is complete either failed or success, page will return            \nif (didMount === true) {\n    return (\n        <main>\n        { //checks if author is logged in user, if not reroutes to forbidden\n          authUserId !== authorId\n            ? <Redirect to={{\n                  pathname: '/forbidden',\n                }} />\n            :<div className=\"wrap\">\n                <h2>Update</h2>\n                <Form \n                cancel={this.cancel}\n                errors={errors}\n                submit={this.submit}\n                submitButtonText=\"Update Course\"\n                elements={() => (\n                    <React.Fragment>\n                    <div className=\"main--flex\">\n                        <div>\n                            <label htmlFor=\"title\">Course Title</label>\n                            <input \n                                id=\"title\" \n                                name=\"title\" \n                                type=\"text\"\n                                value={title} \n                                onChange={this.change} \n                                placeholder=\"Course Title\" />\n\n                            <p>By {this.props.context.authenticatedUser.Name}</p>\n\n                            <label htmlFor=\"description\">Course Description</label>\n                            <textarea \n                                id=\"description\" \n                                name=\"description\" \n                                type=\"textarea\"\n                                value={description} \n                                onChange={this.change} \n                                placeholder=\"Enter Course Description\" />\n\n                        </div>\n                        <div>\n                            <label htmlFor=\"estimatedTime\">Estimated Time</label>\n                                <input \n                                    id=\"estimatedTime\" \n                                    name=\"tiestimatedTimetle\" \n                                    type=\"text\"\n                                    value={estimatedTime} \n                                    onChange={this.change} \n                                    placeholder=\"Estimated Time\" />\n\n                            <label htmlFor=\"materialsNeeded\">Materials Needed</label>\n                            <textarea \n                                id=\"materialsNeeded\" \n                                name=\"materialsNeeded\" \n                                type=\"textarea\"\n                                value={materialsNeeded} \n                                onChange={this.change} \n                                placeholder=\"Enter Materials Needed\" />\n                        </div>\n                    </div>\n                    </React.Fragment>\n            )} />\n            </div>\n        }\n        </main>\n    );\n}}\n\n\n//updates values on change\nchange = (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n\n    this.setState(() => {\n      return {\n        [name]: value\n      };\n    });\n  }\n\n  //handles submit and runs update course function\nsubmit = () => {\n    const id = this.props.match.params.id;\n    const { context } = this.props;\n    const { password } = context;\n    const userId = context.authenticatedUser[ \"User ID\" ];\n    const username = context.authenticatedUser.Username;\n    const { title, description, estimatedTime, materialsNeeded } = this.state;\n    const body = {\n\n        \"title\": title,\n        \"description\": description,\n        \"estimatedTime\": estimatedTime,\n        \"materialsNeeded\": materialsNeeded,\n        \"userId\": userId,\n\n    };\n    context.data.updateCourse(username, password, body, id)\n    .then(errors => {\n            if (errors.length) {\n              this.setState({ errors });\n            }  else {\n            this.props.history.push(`/courses/${id}`);\n            }\n        })\n        .catch( err => {\n        console.log(err);\n        this.props.history.push('/error')\n        })\n  }\n\n  //handles cancel function\n    cancel = () => {\n        const id = this.props.match.params.id;\n        this.props.history.push(`/courses/${id}`);\n      }\n}\n\nexport default withRouter(CreateCourse);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}